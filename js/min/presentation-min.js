!function($){var e="/sites/all/modules/custom/explore_presentations/",s={self:$(".presentation"),window:$(".presentation .window"),slides:$(".presentation .pslide"),illos:$(".presentation .pslide .illo span"),offset:0,count:$(".presentation .pslide").length,navtrigger:$(".presentation .pnav .pnav-trigger"),titleswrap:$(".presentation .pnav .slidetitles"),navlink:$(".presentation .pnav li span")},n={duration:750,semaphore:1},a={show:function(e){Modernizr.csstransitions?e.addClass("showing"):e.css({top:s.window.height()}).addClass("showing").animate({top:0},n.duration),setTimeout(function(){e.addClass("animating")},n.duration),a.loadBG(e)},hide:function(e){e.addClass("move-back"),setTimeout(function(){e.removeClass("animating").removeClass("showing").removeClass("move-back"),Modernizr.csstransitions||e.css({top:""})},n.duration)},loadBG:function(s){var n=s.attr("data-bg"),a=$("<img />");"undefined"!=typeof n&&n.length>0&&(a.addClass("bg").attr("src",e+"css/"+n).css({display:"none"}).prependTo(s),s.removeAttr("data-bg").waitForImages(function(){setTimeout(function(){a.fadeIn()},500)}))},shownav:function(){s.self.addClass("shownav"),$("html").addClass("fade-page")},hidenav:function(){s.slides.eq(0).hasClass("showing")&&!s.slides.eq(0).hasClass("move-back")&&s.self.removeClass("shownav"),$("html").removeClass("fade-page")},lock:function(){n.semaphore=0},unlock:function(){n.semaphore=1}};s.slides.click(function(e,i){if("undefined"==typeof i&&(i="slide"),e.preventDefault(),a.shownav(),n.semaphore){var t=s.slides.filter(".showing"),o=s.slides.eq(($(this).index()+1)%s.count),l=t.attr("data-redirect");"undefined"!=typeof l&&"slide"==i?window.location=l:(a.lock(),s.self.hasClass("expandnav")&&s.self.removeClass("expandnav"),a.hide(t),a.show(o),s.titleswrap.find(".active").removeClass("active").end().find("li").eq(o.index()).addClass("active"),setTimeout(function(){a.unlock()},n.duration))}}).find("a").click(function(e){e.stopPropagation()}),s.navtrigger.click(function(e){e.preventDefault(),s.self.toggleClass("expandnav")}),s.titleswrap.click(function(e){s.self.hasClass("expandnav")||s.self.addClass("expandnav")}),s.navlink.click(function(e){e.preventDefault();var n=$(this).parent("li");s.self.hasClass("expandnav")&&(e.stopPropagation(),n.hasClass("active")?s.self.removeClass("expandnav"):s.slides.eq(n.index()-1).trigger("click","navlink"))}),s.self.addClass("no-preload"),s.self.hover(function(){a.shownav()},function(){a.hidenav()})}(jQuery);